import{t as e,h as a,M as l,k as s,w as t,bn as u,n as r,bh as o,f as i,b6 as d,bd as n,bf as c,bg as v,D as m,ac as p,ab as f,bv as b,bw as h,bl as w}from"./vendor-BeH32teS.js";import{u as g,a as y,b as k,V as _}from"./index-COEqgLtu.js";const q={class:"app-card setup-card"},x={class:"setup-icon"},C={key:0,class:"error-alert"},z={key:1,class:"warning-alert"},P={class:"form-field"},A={class:"input-wrapper"},U=["disabled"],V={key:0,class:"input-modified-hint"},H={class:"form-field"},I={class:"input-wrapper"},L=["type","disabled"],O={class:"password-requirements"},S={class:"form-field"},j={class:"input-wrapper"},Z=["type","disabled"],D=["disabled"],E={key:0},M={key:1,class:"button-loader"},T={__name:"SetupView",setup(T){const $=u(),B=g(),{username:F,text:G}=y(),J=e(""),K=e(""),N=e(""),Q=e(!1),R=e(""),W=e(!1),X=()=>{const e=J.value;J.value=F(J.value,{maxLength:20,allowedPattern:/^[a-zA-Z0-9_-]$/}),W.value=e!==J.value,W.value&&setTimeout((()=>{W.value=!1}),3e3)},Y=()=>{K.value=G(K.value,{maxLength:50,removeHtml:!0,trim:!1})},ee=()=>{N.value=G(N.value,{maxLength:50,removeHtml:!0,trim:!1})},ae=a((()=>K.value.length>=12)),le=a((()=>/[A-Z]/.test(K.value))),se=a((()=>/[a-z]/.test(K.value))),te=a((()=>/[0-9]/.test(K.value))),ue=a((()=>/[^A-Za-z0-9]/.test(K.value))),re=a((()=>ae.value&&le.value&&se.value&&te.value&&ue.value)),oe=a((()=>J.value.length>=3&&re.value&&K.value===N.value)),ie=async()=>{R.value="";const e=F(J.value),a=G(K.value,{removeHtml:!0,trim:!1});if(e.length<3)return void(R.value="Username must be at least 3 characters");if(!re.value)return void(R.value="Please meet all password requirements");if(a!==G(N.value,{removeHtml:!0,trim:!1}))return void(R.value="Passwords do not match");await B.setupAdmin(e,a)&&$.push("/agentChat")};return l([K,N],(([e,a])=>{e&&a&&e!==a?R.value="Passwords do not match":"Passwords do not match"===R.value&&(R.value="")})),(e,a)=>(r(),s(k,{showLogout:!1,contentClass:"auth-content"},{default:t((()=>[o("div",q,[o("div",x,[i(_,{size:"32",color:"#4C64E2"},{default:t((()=>a[4]||(a[4]=[d("mdi-shield-account")]))),_:1})]),a[16]||(a[16]=o("h1",{class:"auth-title"},"Initial Setup",-1)),a[17]||(a[17]=o("div",{class:"auth-subtitle"},"Create your admin account to get started",-1)),o("form",{onSubmit:n(ie,["prevent"]),class:"auth-form"},[m(B).error.value?(r(),c("div",C,p(m(B).error.value),1)):v("",!0),R.value?(r(),c("div",z,p(R.value),1)):v("",!0),o("div",P,[a[6]||(a[6]=o("label",{for:"username"},"Admin Username",-1)),o("div",A,[i(_,{class:"field-icon"},{default:t((()=>a[5]||(a[5]=[d("mdi-account")]))),_:1}),f(o("input",{type:"text",id:"username","onUpdate:modelValue":a[0]||(a[0]=e=>J.value=e),placeholder:"Choose an admin username",autocomplete:"username",required:"",disabled:m(B).loading.value,onInput:X},null,40,U),[[b,J.value]])]),W.value?(r(),c("small",V," Username was adjusted to remove invalid characters ")):v("",!0)]),o("div",H,[a[13]||(a[13]=o("label",{for:"password"},"Password",-1)),o("div",I,[i(_,{class:"field-icon"},{default:t((()=>a[7]||(a[7]=[d("mdi-lock")]))),_:1}),f(o("input",{type:Q.value?"text":"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>K.value=e),placeholder:"Create a secure password",autocomplete:"new-password",required:"",disabled:m(B).loading.value,onInput:Y},null,40,L),[[h,K.value]]),o("button",{type:"button",class:"password-toggle",onClick:a[2]||(a[2]=e=>Q.value=!Q.value),tabindex:"-1"},[i(_,null,{default:t((()=>[d(p(Q.value?"mdi-eye-off":"mdi-eye"),1)])),_:1})])]),o("div",O,[o("div",{class:w(["requirement",{met:ae.value}])},[i(_,{size:"14",color:ae.value?"#10b981":"#9ca3af"},{default:t((()=>[d(p(ae.value?"mdi-check-circle":"mdi-circle-outline"),1)])),_:1},8,["color"]),a[8]||(a[8]=o("span",null,"At least 12 characters",-1))],2),o("div",{class:w(["requirement",{met:le.value}])},[i(_,{size:"14",color:le.value?"#10b981":"#9ca3af"},{default:t((()=>[d(p(le.value?"mdi-check-circle":"mdi-circle-outline"),1)])),_:1},8,["color"]),a[9]||(a[9]=o("span",null,"One uppercase letter",-1))],2),o("div",{class:w(["requirement",{met:se.value}])},[i(_,{size:"14",color:se.value?"#10b981":"#9ca3af"},{default:t((()=>[d(p(se.value?"mdi-check-circle":"mdi-circle-outline"),1)])),_:1},8,["color"]),a[10]||(a[10]=o("span",null,"One lowercase letter",-1))],2),o("div",{class:w(["requirement",{met:te.value}])},[i(_,{size:"14",color:te.value?"#10b981":"#9ca3af"},{default:t((()=>[d(p(te.value?"mdi-check-circle":"mdi-circle-outline"),1)])),_:1},8,["color"]),a[11]||(a[11]=o("span",null,"One number",-1))],2),o("div",{class:w(["requirement",{met:ue.value}])},[i(_,{size:"14",color:ue.value?"#10b981":"#9ca3af"},{default:t((()=>[d(p(ue.value?"mdi-check-circle":"mdi-circle-outline"),1)])),_:1},8,["color"]),a[12]||(a[12]=o("span",null,"One special character",-1))],2)])]),o("div",S,[a[15]||(a[15]=o("label",{for:"confirmPassword"},"Confirm Password",-1)),o("div",j,[i(_,{class:"field-icon"},{default:t((()=>a[14]||(a[14]=[d("mdi-lock-check")]))),_:1}),f(o("input",{type:Q.value?"text":"password",id:"confirmPassword","onUpdate:modelValue":a[3]||(a[3]=e=>N.value=e),placeholder:"Confirm your password",autocomplete:"new-password",required:"",disabled:m(B).loading.value,onInput:ee},null,40,Z),[[h,N.value]])])]),o("button",{type:"submit",class:w(["auth-button glow-effect",{loading:m(B).loading.value}]),disabled:m(B).loading.value||!oe.value},[m(B).loading.value?(r(),c("div",M)):(r(),c("span",E,"Complete Setup"))],10,D)],32)])])),_:1}))}};export{T as default};
