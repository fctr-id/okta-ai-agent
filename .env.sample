# ===================================================================
#  Application Configuration
# ===================================================================
#
# Please fill out the sections below. Start with the required Okta
# and AI Provider settings, then review the optional settings.
#

# -------------------------------------------------------------------
#  1. Core Okta & Security Configuration (Required)
# -------------------------------------------------------------------

# Your Okta organization URL (format: https://your-domain.okta.com)
OKTA_CLIENT_ORGURL=https://dev-2715.okta.com

# Choose authentication method: API_TOKEN or OAUTH2
# API_TOKEN: Uses SSWS API tokens (current method)
# OAUTH2: Uses OAuth2 client credentials flow with private key JWT
TOKEN_METHOD=API_TOKEN

# An API token generated from the Okta Admin Console.
# A read-only admin role is sufficient.
# (Required if TOKEN_METHOD=API_TOKEN)
OKTA_API_TOKEN=

# -------------------------------------------------------------------
#  OAuth2 Client Configuration (Required if TOKEN_METHOD=OAUTH2)
# -------------------------------------------------------------------

# OAuth2 Client ID - obtained from your Okta application
OKTA_OAUTH2_CLIENT_ID=

# OAuth2 Scopes - space-separated list of requested scopes
# Common scopes: okta.users.read okta.groups.read okta.apps.read okta.logs.read
OKTA_OAUTH2_SCOPES="okta.agentPools.read okta.appGrants.read okta.apps.read okta.authModes.read okta.authenticators.read okta.authorizationServers.read okta.behaviors.read okta.brands.read okta.captchas.read okta.certificateAuthorities.read okta.clients.read okta.deviceAssurance.read okta.devices.read okta.domains.read okta.emailDomains.read okta.emailServers.read okta.enduser.dashboard.read okta.enduser.read okta.eventHooks.read okta.events.read okta.factors.read okta.groups.read okta.identitySources.read okta.idps.read okta.inlineHooks.read okta.linkedObjects.read okta.logStreams.read okta.logs.read okta.manifests.read okta.networkZones.read okta.orgs.read okta.policies.read okta.principalRateLimits.read okta.profileMappings.read okta.pushProviders.read okta.rateLimits.read okta.reports.read okta.riskProviders.read okta.roles.read okta.schemas.read okta.securityEventsProviders.read okta.sessions.read okta.templates.read okta.threatInsights.read okta.trustedOrigins.read okta.uischemas.read okta.userTypes.read okta.users.read"

# Private Key for JWT Authentication (Required if TOKEN_METHOD=OAUTH2)
# Paste your private key in PEM format starting with -----BEGIN PRIVATE KEY-----
# Keep exact formatting with line breaks, no quotes needed for multi-line keys
OKTA_OAUTH2_PRIVATE_KEY_PEM=""

## Session and Security
# Session duration in minutes. COOKIE_MAX_AGE_MINUTES and JWT_ACCESS_TOKEN_EXPIRE_MINUTES must match to prevent auth issues.
COOKIE_SECURE=True
COOKIE_MAX_AGE_MINUTES=30
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30


# -------------------------------------------------------------------
#  2. Okta User Sync Configuration (Optional)
# -------------------------------------------------------------------

# Additional user attributes from Okta to sync (comma-separated). Default attributes: id, email, login, status, firstName, lastName, created, lastLogin.
# Example: OKTA_USER_CUSTOM_ATTRIBUTES=costCenter,division,hireDate
OKTA_USER_CUSTOM_ATTRIBUTES=

# ---------------------------------------------------------------
# Deprovisioned User Sync Configuration (Optional)
# ---------------------------------------------------------------
# By default, Okta syncs all active users but EXCLUDES deprovisioned/disabled users.
# Use these settings to also sync deprovisioned users with specific criteria:

# Include deprovisioned/disabled users in the sync (true/false)
# Set to 'false' to exclude all deprovisioned users (default Okta behavior)
SYNC_DEPROVISIONED_USERS=true

# Only sync deprovisioned users created after this date (YYYY-MM-DD format)
# If blank, creation date will NOT be used as filter criteria for deprovisioned users
# Example: DEPR_USER_CREATED_AFTER=2024-01-01
DEPR_USER_CREATED_AFTER=

# Only sync deprovisioned users updated after this date (YYYY-MM-DD format)  
# If blank, last updated date will NOT be used as filter criteria for deprovisioned users
# Example: DEPR_USER_UPDATED_AFTER=2025-03-01
DEPR_USER_UPDATED_AFTER=2025-03-01

# Behavior: If SYNC_DEPROVISIONED_USERS=false, no deprovisioned users synced. If true with blank dates, ALL deprovisioned users synced. If true with dates, only matching users synced.


# ---------------------------------------------------------------
# Device Sync (Optional - Defaults to false)
# ---------------------------------------------------------------
# Set to 'true' to sync Okta device information and user-device relationships. 
# This will take longer and require more API calls.
SYNC_OKTA_DEVICES=false

# -------------------------------------------------------------------
#  3. Performance Tuning (REQUIRED and Important)
# -------------------------------------------------------------------

# Controls concurrent Okta API requests during sync. Check your API token's rate limit in Okta Admin Console (Security > API > Tokens).
# Developer accounts: 5-10 | Enterprise 10% limit: 10-15 | Enterprise 20%+ limit: 20-30
# Start conservative and increase if sync is slow without hitting rate limits.
OKTA_CONCURRENT_LIMIT=15


# -------------------------------------------------------------------
#  4. AI Provider Selection (Required)
# -------------------------------------------------------------------
# Choose your AI provider, then ONLY fill in that provider's section below.
# Options: google, vertex_ai, openai, azure_openai, anthropic, openai_compatible (local LLMs), bedrock
AI_PROVIDER=openai


# =========== AI Provider Specific Settings ==========
#   Fill out ONLY the section that matches your AI_PROVIDER choice above
# =====================================================

# --- Google AI Studio (Simple API Key) ---
# Get your API key from: https://aistudio.google.com
# Fast setup, no GCP project needed
GOOGLE_API_KEY=
GOOGLE_REASONING_MODEL=gemini-2.5-pro
GOOGLE_CODING_MODEL=gemini-2.5-pro

# --- Vertex AI (Enterprise GCP) ---
# For enterprise users with GCP service accounts
# Requires: service account JSON, GCP project ID, and location
# NOTE: Preview models (gemini-3-flash-preview, etc.) require location="global"
#       Stable models (gemini-2.5-pro, gemini-1.5-flash) work with regional locations
VERTEX_AI_SERVICE_ACCOUNT_FILE=path/to/service-account.json  #(or set GOOGLE_APPLICATION_CREDENTIALS env var)
VERTEX_AI_PROJECT=your-gcp-project-id
VERTEX_AI_LOCATION=global
VERTEX_AI_REASONING_MODEL=gemini-2.5-pro
VERTEX_AI_CODING_MODEL=gemini-3-flash-preview

# --- OpenAI Settings ---
# For best outputs, use 'o3' for reasoning, or 'o4-mini' for a cheaper alternative.
# Note: Using OpenAI Responses API (supports o3, o4-mini, gpt-5, gpt-4o models)
OPENAI_API_KEY=
OPENAI_REASONING_MODEL=o4-mini
OPENAI_CODING_MODEL=gpt-5

# --- Azure OpenAI Settings ---
# Note: Using OpenAI Responses API (ensure your Azure deployment supports Responses API models)
AZURE_OPENAI_KEY=
AZURE_OPENAI_ENDPOINT=https://xxxxxx.cognitiveservices.azure.com/
AZURE_OPENAI_VERSION=2024-07-08
AZURE_OPENAI_REASONING_MODEL=gpt-4o
AZURE_OPENAI_CODING_MODEL=gpt-4o

# --- Anthropic Settings ---
ANTHROPIC_API_KEY=sk-xxxx
ANTHROPIC_REASONING_MODEL=claude-sonnet-4-20250514
ANTHROPIC_CODING_MODEL=claude-sonnet-4-20250514

# --- OpenAI Compatible (for local LLMs like Ollama, etc.) ---
OPENAI_COMPATIBLE_REASONING_MODEL=llama3
OPENAI_COMPATIBLE_CODING_MODEL=llama3
# For Docker deployments, use host.docker.internal instead of localhost
# Local: http://localhost:11434/v1  |  Docker: http://host.docker.internal:11434/v1
OPENAI_COMPATIBLE_BASE_URL=http://localhost:11434/v1
# Most local LLMs don't require authentication - you can leave this blank or remove it
OPENAI_COMPATIBLE_TOKEN=ollama

# --- AWS Bedrock Settings ---
# AWS credentials can be provided via environment variables or IAM roles
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_SESSION_TOKEN=your-session-token
AWS_DEFAULT_REGION=us-east-1
# Bedrock model names - use full model identifiers
BEDROCK_REASONING_MODEL=anthropic.claude-3-7-sonnet-20250219-v1:0
BEDROCK_CODING_MODEL=anthropic.claude-3-7-sonnet-20250219-v1:0


# -------------------------------------------------------------------
#  5. Advanced Application Settings (Optional)
# -------------------------------------------------------------------

# Set the application log level. Options: DEBUG, INFO
LOG_LEVEL=INFO

# Add custom headers for LLM calls, useful for security proxies. Can only be used with openai_compatible provider.
# Example: CUSTOM_HTTP_HEADERS={"x-api-key": "your-api-key"}
CUSTOM_HTTP_HEADERS={}

## TLS/SSL Settings
# Set to 'false' if you need to disable SSL verification (not recommended).
VERIFY_SSL=true
# To use a custom CA, place the file in src/backend/certs/ and provide the filename.
# SSL_CA_BUNDLE_FILENAME=custom-trust-certs.pem


# -------------------------------------------------------------------
#  6. Multi-Agent System - Circuit Breaker Limits (Optional)
# -------------------------------------------------------------------
# Prevent infinite tool call loops by limiting expensive operations.

# Max total tool calls across all agents (SQL + API discovery phases combined)
# Each agent phase uses tools like test_query, execute_api_call, etc.
# Default: 30 calls total (typically 10-15 for SQL phase, 10-15 for API phase)
MAX_TOOL_CALLS=30

